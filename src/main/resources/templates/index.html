<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Student Result System</title>
    <style>
        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
        }
        th, td { padding: 8px; }
        input { margin: 5px; }
    </style>
</head>
<body>
    <h1>Student Result Management System</h1>

    <h2>Add Student</h2>
    <input type="text" id="name" placeholder="Name">
    <input type="text" id="roll" placeholder="Roll Number">
    <input type="number" id="marks" placeholder="Marks">
    <button onclick="addStudent()">Add</button>

    <h2>Students List</h2>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Roll Number</th>
                <th>Marks</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="studentsTable">
            <!-- Students will be loaded here -->
        </tbody>
    </table>

<script>
const apiUrl = '/students';

async function fetchStudents() {
    const response = await fetch(apiUrl);
    const students = await response.json();

    const tableBody = document.getElementById('studentsTable');
    tableBody.innerHTML = '';

    students.forEach(student => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${student.id}</td>
            <td><input type="text" value="${student.name}" id="name-${student.id}"></td>
            <td><input type="text" value="${student.rollNumber}" id="roll-${student.id}"></td>
            <td><input type="number" value="${student.marks}" id="marks-${student.id}"></td>
            <td>
                <button onclick="updateStudent(${student.id})">Update</button>
                <button onclick="deleteStudent(${student.id})">Delete</button>
            </td>
        `;
        tableBody.appendChild(row);
    });
}

async function addStudent() {
    const name = document.getElementById('name').value;
    const roll = document.getElementById('roll').value;
    const marks = document.getElementById('marks').value;

    await fetch(apiUrl, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({name, rollNumber: roll, marks: parseInt(marks)})
    });

    document.getElementById('name').value = '';
    document.getElementById('roll').value = '';
    document.getElementById('marks').value = '';
    fetchStudents();
}

async function updateStudent(id) {
    const name = document.getElementById(`name-${id}`).value;
    const roll = document.getElementById(`roll-${id}`).value;
    const marks = document.getElementById(`marks-${id}`).value;

    await fetch(`${apiUrl}/${id}`, {
        method: 'PUT',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({name, rollNumber: roll, marks: parseInt(marks)})
    });

    fetchStudents();
}

async function deleteStudent(id) {
    await fetch(`${apiUrl}/${id}`, { method: 'DELETE' });
    fetchStudents();
}

// Load students on page load
fetchStudents();
</script>

</body>
</html>

